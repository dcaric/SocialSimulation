<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Simulation: Digital Physics</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Outfit:wght@300;600&display=swap"
        rel="stylesheet">
</head>

<body>
    <div id="app">
        <header>
            <div class="header-main">
                <h1>Social Simulation</h1>
                <div class="header-controls">
                    <button id="reportBtn" class="icon-btn" title="Generate Status Report">üìù</button>
                    <button id="legendBtn" class="icon-btn" title="Color Legend">üìñ</button>
                    <button id="infoBtn" class="icon-btn" title="Faction Information">‚ìò</button>
                    <button id="sidebarToggle" class="icon-btn mobile-only" title="Toggle Dashboard">‚ò∞</button>
                </div>
            </div>
            <p class="subtitle">Exploring Emergent Behaviors & Digital Physics</p>
        </header>

        <main>
            <div class="simulation-container">
                <canvas id="simCanvas"></canvas>
            </div>

            <aside class="dashboard glass">
                <button id="sidebarClose" class="close-sidebar-btn">&times;</button>
                <div id="worldStatus" class="world-status status-genesis">PHASE: GENESIS</div>
                <section class="controls-section">
                    <h3>Simulation Controls</h3>
                    <div class="main-controls">
                        <button id="startBtn" class="primary-btn">START SIMULATION</button>
                        <button id="restartBtn" class="secondary-btn">RESTART</button>
                    </div>
                    <div class="stats-mini" style="margin-top: 1rem;">
                        <span id="popCount">Agents: 500</span>
                        <span id="entropyLevel">Entropy: 0.50</span>
                    </div>
                </section>
                <section class="faction-stats">
                    <h3>Faction Distribution</h3>
                    <div class="stat-row" data-faction="Entropics">
                        <div class="label">Entropics</div>
                        <div class="bar-container">
                            <div class="bar" style="width: 25%; background: var(--entropic-color);"></div>
                        </div>
                        <div class="value">25%</div>
                    </div>
                    <div class="stat-row" data-faction="Luminaries">
                        <div class="label">Luminaries</div>
                        <div class="bar-container">
                            <div class="bar" style="width: 25%; background: var(--luminary-color);"></div>
                        </div>
                        <div class="value">25%</div>
                    </div>
                    <div class="stat-row" data-faction="Catalysts">
                        <div class="label">Catalysts</div>
                        <div class="bar-container">
                            <div class="bar" style="width: 25%; background: var(--catalyst-color);"></div>
                        </div>
                        <div class="value">25%</div>
                    </div>
                    <div class="stat-row" data-faction="Inert">
                        <div class="label">Inert</div>
                        <div class="bar-container">
                            <div class="bar" style="width: 25%; background: var(--inert-color);"></div>
                        </div>
                        <div class="value">25%</div>
                    </div>
                </section>

                <section class="world-modifiers"
                    style="border-top: 1px solid var(--glass-border); padding-top: 1rem; margin-top: 1rem;">
                    <h3>World Modifiers</h3>
                    <div class="modifier-row" style="margin-bottom: 0.5rem;">
                        <label style="display: flex; justify-content: space-between;">
                            <span>‚öîÔ∏è Aggression</span>
                            <span id="val-aggression">1.0x</span>
                        </label>
                        <input type="range" id="globalAggression" min="0" max="2" step="0.1" value="1"
                            style="width: 100%;">
                    </div>
                    <div class="modifier-row" style="margin-bottom: 0.5rem;">
                        <label style="display: flex; justify-content: space-between;">
                            <span>‚ù§Ô∏è Empathy</span>
                            <span id="val-empathy">1.0x</span>
                        </label>
                        <input type="range" id="globalEmpathy" min="0" max="2" step="0.1" value="1"
                            style="width: 100%;">
                    </div>
                    <div class="modifier-row">
                        <label style="display: flex; justify-content: space-between;">
                            <span>‚ö° Energy</span>
                            <span id="val-energy">1.0x</span>
                        </label>
                        <input type="range" id="globalEnergy" min="0" max="2" step="0.1" value="1" style="width: 100%;">
                    </div>
                </section>

                <section class="log-container">
                    <h3>Activity Log</h3>
                    <div id="simLog" class="log-content">
                        <p class="log-entry">Waiting for genesis...</p>
                    </div>
                </section>

                <section class="god-mode-controls"
                    style="margin-top: auto; padding-top: 1rem; border-top: 1px solid var(--glass-border);">
                    <h3>Observer Powers</h3>
                    <div class="observer-powers" style="flex-direction: column; gap: 1rem;">
                        <div style="display: flex; gap: 1rem; width: 100%;">
                            <button id="glitchBtn" title="Trigger Deja Vu Pulse" style="flex: 1;">‚ö° GLITCH</button>
                            <button id="observerBtn" title="Trigger Quantum Collapse" style="flex: 1;">üëÅÔ∏è
                                OBSERVE</button>
                        </div>
                        <div class="speed-control" style="width: 100%; justify-content: space-between;">
                            <label>Sim Speed</label>
                            <input type="range" id="speedSlider" min="0.1" max="3" step="0.1" value="1"
                                style="flex: 1; margin-left: 1rem;">
                        </div>
                    </div>
                </section>
            </aside>
        </main>
    </div>
    <div id="infoModal" class="modal">
        <div class="modal-content glass">
            <span class="close-btn">&times;</span>
            <h2>Faction Intelligence</h2>
            <div class="theory-section"
                style="margin-bottom: 2rem; padding: 1rem; background: rgba(255, 255, 255, 0.05); border-radius: 8px; border: 1px solid var(--glass-border);">
                <h3 style="color: var(--accent-color); margin-bottom: 0.5rem;">The Core Theory</h3>
                <p style="font-size: 0.9rem; color: #ccc; line-height: 1.6;">
                    This project is a <strong>Social Simulation</strong> based on the principles of <strong>Agent-Based
                        Modeling (ABM)</strong> and **Digital Physics**. It explores the idea that complex, lifelike
                    patterns in our reality can emerge from a few simple algorithmic instructions. By observing 500
                    agents with 40 personality types, we can witness how sub-cultures, segregation, and "Heat Death"
                    occur naturally in a closed system.
                </p>
                <p style="font-size: 0.85rem; color: #888; margin-top: 1rem; font-style: italic;">
                    The 40 personalities are divided into 10 specialized variations for each of the 4 factions. For
                    example, within the <strong>Entropics</strong>, you'll find everything from silent
                    <strong>Leeches</strong> to high-speed <strong>Reapers</strong>, each with different rates of
                    aggression and energy consumption.
                </p>
            </div>
            <div class="faction-grid">
                <div class="faction-card" style="border-top: 4px solid var(--entropic-color);">
                    <h3>üåë Entropics</h3>
                    <p><strong>Logic:</strong> Zero-Sum Gain / Drain</p>
                    <p>Predators that seek high-value targets to consume or convert. They represent decay and entropy.
                    </p>
                </div>
                <div class="faction-card" style="border-top: 4px solid var(--luminary-color);">
                    <h3>‚òÄÔ∏è Luminaries</h3>
                    <p><strong>Logic:</strong> Positive-Sum / Synergistic</p>
                    <p>Defenders that form stable clusters to heal and protect. They represent order and optimization.
                    </p>
                </div>
                <div class="faction-card" style="border-top: 4px solid var(--catalyst-color);">
                    <h3>üß™ Catalysts</h3>
                    <p><strong>Logic:</strong> Quantum Chaos / Mutation</p>
                    <p>Wildcards that trigger random state changes and physics glitches. They prevent stagnation.</p>
                </div>
                <div class="faction-card" style="border-top: 4px solid var(--inert-color);">
                    <h3>üîò Inert</h3>
                    <p><strong>Logic:</strong> Background / Resource</p>
                    <p>The base population. They are the stable fabric of the world, easily influenced by dominant
                        forces.</p>
                </div>
            </div>
            <div class="glitch-explanation"
                style="margin-top: 2rem; padding: 1rem; border-left: 2px solid #ff00ff; background: rgba(255, 0, 255, 0.05); border-radius: 4px;">
                <h3 style="color: #ff00ff; margin-bottom: 0.5rem;">‚ö° The Glitch (Observer Intervention)</h3>
                <p style="font-size: 0.85rem; color: #aaa; line-height: 1.5;">
                    Inspired by simulation theory and <strong>"Deja Vu"</strong>, the GLITCH button mimics a system-wide
                    race condition. It rewrites the <strong>spatial coordinates</strong> of random agents, effectively
                    resetting their perception of time and space. Use it to break up "Heat Death" or to rescue a dying
                    faction.
                </p>
            </div>
        </div>
    </div>
    <div id="legendModal" class="modal">
        <div class="modal-content glass" style="max-width: 800px;">
            <span class="close-btn-legend close-btn">&times;</span>
            <h2>Visual Legend</h2>
            <div id="legendContainer" class="legend-grid-container">
                <!-- Populated by JS -->
            </div>
        </div>
    </div>
    <div id="reportModal" class="modal">
        <div class="modal-content glass">
            <span class="close-btn-report close-btn">&times;</span>
            <h2>Simulation Status Report</h2>
            <div id="reportContainer" class="report-text">
                <!-- Dynamically populated -->
            </div>
        </div>
    </div>
    <script src="simulation.js"></script>
</body>

</html>